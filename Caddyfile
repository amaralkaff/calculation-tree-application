:80 {
  root * ./dist

  # Enable compression
  encode gzip

  # Serve files
  file_server browse

  # SPA routing - fall back to index.html for all non-file requests
  try_files {path} /index.html

  # Cache headers for assets
  header /assets/* Cache-Control "public, max-age=31536000, immutable"
  header /index.html Cache-Control "public, max-age=0, must-revalidate"

  # Security headers
  header X-Frame-Options "SAMEORIGIN"
  header X-Content-Type-Options "nosniff"
  header X-XSS-Protection "1; mode=block"

  # Log requests for debugging
  log {
    output stdout
    format json
  }
}
